<!DOCTYPE html>
<html lang="pt" xml:lang="pt" xmlns="http://www.w3.org/1999/xhtml">

<head>
    <title>CDC</title>
    <meta charset="utf8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <link rel="stylesheet"
        href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css" />
    <script src="js-webshim/minified/polyfiller.js"></script>
    <link rel="stylesheet" href="./main.css">
</head>

<body>
    <fieldset id="cdcfieldset" class="draggable ui-widget-content" style="
                border: 1px black solid;
                background-color: #cac3ba;
                width: 400px;
            ">
        <legend style="
                    border: 5px lightblue solid;
                    margin-left: 1em;
                    background-color: #ff6347;
                    padding: 0.2em 0.8em;
                ">
            <strong>Crédito Direto ao Consumidor</strong>
        </legend>
        <form action="/cgi-bin/cdc.cgi" method="post">
            <div class="box">
                <span class="input-group-addon" style="color: antiquewhite">$</span>
                <label for="parc">Parcelamento:</label>
                <input id="parc" type="number" name="np" size="5" value="36" min="1" max="72000" step="1"
                    required />meses<br />

                <span class="input-group-addon" style="color: antiquewhite">$</span>
                <label for="itax">Taxa de juros:</label>
                <input id="itax" type="number" name="tax" size="10" value="0.50" min="0.0" max="100.0" step="any"
                    required />% mês<br />

                <span class="input-group-addon">$</span>
                <label for="ipv">Valor Financiado: </label>
                <input id="ipv" type="number" name="pv" value="1000" min="0.0" step="0.01" class="form-control currency"
                    required /><br />

                <span class="input-group-addon">$</span>
                <label for="ipp">Valor Final (opcional):</label>
                <input id="ipp" type="number" name="pp" value="0.0" min="0.0" step="0.01" class="form-control currency"
                    required /><br />

                <span class="input-group-addon">$</span>
                <label for="ipb">Valor a Voltar(opcional):</label>
                <input id="ipb" type="number" name="pb" value="0.0" min="0.0" step="0.01" class="form-control currency"
                    required /><br />

                <label for="idp">Entrada?</label>
                <input id="idp" type="checkbox" name="dp" value="1" /><br />
            </div>
            <div class="messages">
                <input id="submitButton" class="button" type="submit" value="Calcular" />

            </div>
        </form>

        <div id="errorMessage" class="messages"></div>
        <div id="successMessage" class="messages">
            <p>
                Se não souber a taxa de juros coloque 0%, e forneça o valor
                final.
            </p>
        </div>
    </fieldset>


    <!-- Botão exibe/oculta os resultados da tabela price -->
    <button id="toggleButton">Exibe/Oculta a tabela price</button>
    <div id="conteudo">
        <!-- tabela HTML -->
        <table id="resultTable" style="width:100%">
            <thead>
                <tr>
                    <th>Mês</th>
                    <th class="money">Prestação</th>
                    <th class="money">Juros</th>
                    <th class="money">Amortização</th>
                    <th class="money">Saldo Devedor</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>




    <script src="LCG.js"></script>

    <!-- referência à biblioteca Big.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/big.js/5.2.2/big.min.js"></script>




    <script type="text/javascript">
        // Função para salvar os valores no Local Storage
        function saveToLocalStorage() {
            var np = $("#parc").val();
            var tax = $("#itax").val();
            var pv = $("#ipv").val();
            var pp = $("#ipp").val();
            var pb = $("#ipb").val();
            var dp = $("#idp").is(":checked");

            // Crie um objeto para armazenar os valores
            var data = {
                np: np,
                tax: tax,
                pv: pv,
                pp: pp,
                pb: pb,
                dp: dp
            };

            // Converta o objeto em uma string JSON
            var jsonData = JSON.stringify(data);

            // Salve a string JSON no Local Storage
            localStorage.setItem('cdcData', jsonData);
        }

        // Função para carregar os valores do Local Storage
        function loadFromLocalStorage() {
            var jsonData = localStorage.getItem('cdcData');

            if (jsonData) {
                var data = JSON.parse(jsonData);

                $("#parc").val(data.np);
                $("#itax").val(data.tax);
                $("#ipv").val(data.pv);
                $("#ipp").val(data.pp);
                $("#ipb").val(data.pb);
                $("#idp").prop("checked", data.dp);
            }
        }

        // Ao carregar a página, verifique se há dados salvos no Local Storage e carregue-os
        $(document).ready(function () {
            loadFromLocalStorage();

            // ouvinte de evento para salvar os valores quando o botão for clicado
            $("#submitButton").click(function () {
                saveToLocalStorage();
            });
        });
    </script>

    <script src="formulas.js"></script>

    <script src="submit.js"></script>

</body>

</html>